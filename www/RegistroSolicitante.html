<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        <title>TopKek</title>
    </head>
    <body style="background-color: #E5E5E5">
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>

  <div class="navbar-fixed">
  <nav style="background-color: #c62828">
        <div class="nav-wrapper">
      <center><a href="#!" class="brand-logo"><img src="images/Logotipo App gris.png" style="height: 60%; width: 60%; margin-top: 9px"></a></center>
      <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  </div>

  <ul class="sidenav" id="mobile-demo">
<!--     <li><a href="RegistroDonador.html"><i class="material-icons">note_add</i>Registrar Donador</a></li>
    <li><a href="#"><i class="material-icons">search</i>Buscar Donador</a></li>
    <li><a href="mapita.html"><i class="material-icons">location_on</i>Bancos de Sangre</a></li>
    <li><a  href="Informacion.html"><i class="material-icons">info</i>Información General</a></li> -->
    <li><div class="user-view">
      <div class="background">
        <img src="images/donar-sangre.png">
      </div>
      <a href="#name"><span class="white-text name">&nbsp;</span></a>
      <a href="#email"><span class="white-text email">&nbsp;</span></a>
    </div></li>
    <li><a href="Principal.html"><i class="material-icons">home</i>Inicio</a></li>
    <li><div class="divider"></div></li>
    <li><a class="subheader">Opciones</a></li>
    <li><a class="waves-effect" href="SeleccionRegistro.html"><i class="material-icons">note_add</i>Registro de Usuarios</a></li>
    <li><a class="waves-effect" href="SeleccionBusqueda.html"><i class="material-icons">search</i>Busqueda de Usuarios</a></li>
    <li><a class="waves-effect" href="mapita.html"><i class="material-icons">location_on</i>Bancos de Sangre</a></li>
    <li><a class="waves-effect" href="Informacion.html"><i class="material-icons">info</i>Información General</a></li>
    <br>
    <br>
    <li><div class="divider"></div></li>
    <li><a href="index.html" class="waves-effect" href="index.html"><i class="material-icons">exit_to_app</i>Salir</a></li>
  </ul>

    <div class="row">
    <div class="col s12 m7">
      <div class="card">
        <div class="card-image">
          <img src="images/registro-solicitante.png">
        </div>
        <div class="card-content">
          <div class="row">
              <form class="col s12" id="formulario">
                <div class="row">
                  <div class="input-field col s12">
                    <input id="name" type="text" class="validate">
                    <label for="name">Nombre Completo</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="telefono" type="tel" class="validate">
                    <label for="telefono">Teléfono de contacto</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="email" type="email" class="validate">
                    <label for="email">Email de contacto</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                      <select id="sexo">
                        <option value="" disabled selected>Seleccione su sexo asignado</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Femenino">Femenino</option>
                      </select>
                    <label for="sexo">Sexo Asignado:</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                      <select id="sangre">
                        <option value="" disabled selected>Seleccione su grupo sanguíneo</option>
                        <option value="Op">O+</option>
                        <option value="O-">O-</option>
                        <option value="Ap">A+</option>
                        <option value="A-">A-</option>
                        <option value="Bp">B+</option>
                        <option value="B-">B-</option>
                        <option value="ABp">AB+</option>
                        <option value="AB-">AB-</option>
                      </select>
                    <label for="sangre">Grupo Sanguíneo:</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                      <select id="centro">
                        <option value="" disabled selected>Centro de donación preferido</option>
                        <option value="Hospital Civil Victoria">Hospital Civil Victoria</option>
                        <option value="Centro Estatal de Transfusión Sanguínea">Centro Estatal de Transfusión Sanguínea</option>
                        <option value="Banco de Sangre Cruz Roja Mexicana">Banco de Sangre Cruz Roja Mexicana</option>
                        <option value="Hospital Infantil de Tamaulipas">Hospital Infantil de Tamaulipas</option>
                        <option value="IMSS Unidad Medica Familiar 67">IMSS Unidad Medica Familiar 67</option>
                        <option value="IMSS Hospital General">IMSS Hospital General</option>
                        <option value="Clinica Hospital ISSSTE">Clinica Hospital ISSSTE</option>
                      </select>
                    <label for="centro">Centro de donación:</label>
                  </div>
                </div>
                <div class="row">
                    <button class="btn-large waves-effect waves-light red darken-4 col s8 push-s2" type="submit" name="action">Enviar
                    <i class="material-icons right">send</i>
                    </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  $(document).ready(function(){
    $('.sidenav').sidenav();
    $('select').formSelect();
  });

    function redireccionar(){
    window.location.href = 'Principal.html';
  }

  $('#formulario').submit(function(event){
    event.preventDefault();

      $.ajax({
        url: 'http://niwadub.pythonanywhere.com/lista-usuarios/',
        dataType: 'json',
        type: 'post',
        contentType: 'application/json',
        data: JSON.stringify( { "categoria": "Solicitante", "nombre": $('#name').val(), "telefono": $('#telefono').val(), "email": $('#email').val(), "sexo": $('#sexo').val(), "tipo": $("#sangre option:selected").val(), "centro": $("#centro option:selected").val() } ),
        success: function( data, textStatus, jQxhr ){
            M.toast({html: '¡Registro exitoso!, regresando al inicio...'})
            setTimeout(redireccionar, 3000)
        },
        error: function( jqXhr, textStatus, errorThrown ){
            M.toast({html: '¡Ocurrio un error en el registro!'})
        }
    });

  });

</script>

    </body>
</html>
